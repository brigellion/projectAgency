(()=>{"use strict";const t=({timing:t,draw:e,duration:n})=>{let o=performance.now();requestAnimationFrame((function r(s){let l=(s-o)/n;l>1&&(l=1);let a=t(l);e(a),l<1&&requestAnimationFrame(r)}))},e=(e,n,o,r)=>{const s=document.querySelector(e),l=document.querySelector(".overlay");1==r?document.querySelector(n).addEventListener("click",(e=>{e.target.closest(".fancyboxModal")&&(s.style.display="block",l.style.display="block",t({duration:1e3,timing:t=>t,draw(t){s.style.opacity=t,l.style.opacity=t}}))})):document.querySelectorAll(n).forEach((e=>{e.addEventListener("click",(e=>{e.target.closest(".fancyboxModal")&&(s.style.display="block",l.style.display="block",t({duration:1e3,timing:t=>t,draw(t){s.style.opacity=t,l.style.opacity=t}}))}))})),s.addEventListener("click",(t=>{t.target.closest(o)&&(s.style.display="none",l.style.display="none")})),l.addEventListener("click",(t=>{s.style.display="none",l.style.display="none"}))},n=t=>{const e=document.querySelector(t);function n(t){t.style.border="5px solid red",setTimeout((()=>{t.style.border=""}),2e3)}try{if(!e)throw new Error("Верните форму на место");e.addEventListener("submit",(t=>{t.preventDefault(),(()=>{const t=e.querySelectorAll("input"),o=new FormData(e),r={};if(o.forEach(((t,e)=>{r[e]=t})),"Балконы"==r.page){const t=document.querySelector("#calc-total");if(!t.value)return document.querySelector("#calc").scrollIntoView({behavior:"smooth"}),void alert("Воспользуйтесь калькулятором!");r.calcPrice=t.value}var s;(t=>{let e,o=!0;for(let r=0;r<t.length;r++)if("phone"===t[r].name){if(e=/^[\+\d]{1,16}$/,!e.test(t[r].value)){n(t[r]),o=!1;break}}else if("fio"===t[r].name&&(e=/^[а-яА-ЯЁ-ёA-Za-z]{1,}$/,!e.test(t[r].value))){n(t[r]),o=!1;break}return o})(t)&&(s=r,fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}}).then((t=>t.json()))).then((e=>{t.forEach((t=>{t.value=""}))})).then((e=>{t.forEach((t=>{t.value=""}))})).catch((t=>{console.log("Data-Form-Error",t)}))})()}))}catch(t){console.log(t.message)}},o=(t,e,n,o,r)=>{const s=document.getElementById(t),l=s.querySelectorAll(e);s&&0!=l.length?(l.forEach(((t,e)=>{e>n-1?t.classList.add("no-active"):t.classList.add("active")})),s.addEventListener("click",(t=>{t.preventDefault(),(t.target.closest(o)||t.target.closest(r))&&l.forEach((t=>{t.classList.toggle("no-active"),t.classList.toggle("active")}))}))):console.warn("нет класса слайдера/слайдов!")},r=(t,e,n,o)=>{const r=document.getElementById(t),s=r.querySelectorAll(e);let l=0;r&&0!=s.length?(s.forEach(((t,e)=>{t.style.display=e===l?"block":"none"})),r.addEventListener("click",(t=>{t.preventDefault(),t.target.closest(n)?(s[l].style.display="none",l++,l>=s.length&&(l=0),s[l].style.display="block"):t.target.closest(o)&&(s[l].style.display="none",l--,l<0&&(l=s.length-1),s[l].style.display="block")}))):console.warn("нет класса слайдера/слайдов!")},s=(t,e)=>{const n=document.querySelector(`#${e}`),o=n.querySelector(".count_1 > span"),r=n.querySelector(".count_2 > span"),s=n.querySelector(".count_3 > span"),l=n.querySelector(".count_4 > span"),a=t=>t<10?"0"+t:t;function c(){let e=(()=>{let e=(new Date(t).getTime()-(new Date).getTime())/1e3;return{timeRemaining:e,days:Math.floor(e/60/60/24),hours:Math.floor(e/60/60%24),minutes:Math.floor(e/60%60),seconds:Math.floor(e%60)}})();e.seconds>=0&&(o.textContent=e.days,r.textContent=a(e.hours),s.textContent=a(e.minutes),l.textContent=a(e.seconds),e.timeRemaining<0&&clearInterval(i))}c();let i=setInterval(c,500)};e(".header-modal",".button",".header-modal__close",1),e(".services-modal",".service-button",".services-modal__close",4),document.documentElement.clientWidth>576?(o("benefits",".benefits__item",3,".benefits__arrow--right",".benefits__arrow--left"),o("services",".service-block",2,".services__arrow--right",".services__arrow--left")):(r("benefits",".benefits__item",".benefits__arrow--right",".benefits__arrow--left"),r("services",".service-block",".services__arrow--right",".services__arrow--left")),s("10 march 2022","order_1"),s("10 march 2022","order_2"),(()=>{const t=document.querySelector(".order-form form[name=action-form]").querySelector("input[name=fio]"),e=document.querySelector(".order-form form[name=action-form]").querySelector("input[name=phone]"),n=document.querySelector(".order-form form[name=action-form2]").querySelector("input[name=fio]"),o=document.querySelector(".order-form form[name=action-form2]").querySelector("input[name=phone]"),r=t=>{t.preventDefault(),t.target.value=t.target.value.replace(/[^а-яА-ЯЁ-ёA-Za-z]/,"")},s=t=>{t.preventDefault(),t.target.value=t.target.value.replace(/[^\+\d]/,"").substr(0,16)};t.addEventListener("input",r),e.addEventListener("input",s),n.addEventListener("input",r),o.addEventListener("input",s)})(),n(".order-form form[name=action-form]"),n(".order-form form[name=action-form2]"),(()=>{const t=document.querySelector("#documents"),e=document.createElement("div"),n=document.createElement("img");e.setAttribute("id","myModal"),e.classList.add("modal"),e.innerHTML='<span class="close">X</span>',n.classList.add("modal-content"),t.addEventListener("click",(o=>{if(o.preventDefault(),o.target.closest(".sertificate-document")){const r=o.target.closest(".sertificate-document").href;n.src=r,t.appendChild(e),e.appendChild(n),e.style.display="block"}})),e.addEventListener("click",(t=>{t.target.closest(".close")&&(e.style.display="none")}))})(),(()=>{const t=document.querySelector(".smooth-scroll");t.style.display="none",window.addEventListener("scroll",(()=>{let e=window.pageYOffset,n=document.documentElement.clientHeight;e>n&&(t.style.display="block"),e<n&&(t.style.display="none")}));const e=()=>{window.pageYOffset>0&&(window.scrollBy(0,-80),setTimeout(e,2))};t.addEventListener("click",e)})(),"Остекление балконов и лоджий"===document.title&&(()=>{const t=document.querySelector("#calc"),e=document.querySelector("#calc-type"),n=document.querySelector("#calc-type-material"),o=document.querySelector("#calc-input"),r=document.querySelector("#calc-total"),s=t=>{t.style.border="5px solid red",setTimeout((()=>{t.style.border=""}),2e3)};var l;t.addEventListener("input",(l=t=>{t.target!==e&&t.target!==n&&t.target!==o||(()=>{if(+e.options[e.selectedIndex].value&&+n.options[e.selectedIndex].value&&0!=+o.value){let s=+o.value*+e.options[e.selectedIndex].value*n.options[n.selectedIndex].value;r.value=Math.round(1e3*s),(t=r).style.border="5px solid green",setTimeout((()=>{t.style.border=""}),2e3)}else+e.options[e.selectedIndex].value||s(e),+n.options[n.selectedIndex].value||s(n),0==+o.value&&s(o),r.value="";var t})()},500,function(t){let e=this.lastCall;this.lastCall=Date.now(),e&&this.lastCall-e<=500&&clearTimeout(this.lastCallTimer),this.lastCallTimer=setTimeout((()=>l(t)),500)})),o.addEventListener("input",(t=>{t.target.value=t.target.value.replace(/[^\d]/,"")}))})(),(()=>{const t=document.querySelector("#reviews").querySelector(".comments-container"),e=document.createElement("div");let n=0;e.classList.add("sk-pulse"),t.appendChild(e);const o=(e,n,o)=>{t.innerHTML="",t.insertAdjacentHTML("beforeend",`\n        <div class="review-margin-bottom row comment-item">\n\t\t\t\t\t\t<div class="col-xs-3 col-sm-2">\n\t\t\t\t\t\t\t<div class="review-user">\n\t\t\t\t\t\t\t\t<img src="images/users/${e.image?e.image:"user_none.png"}" alt="" class="img-responsive avatar">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="col-xs-9 col-sm-9">\n\t\t\t\t\t\t\t<div class="review-inner review-green review-arrow review-arrow-left">\n\t\t\t\t\t\t\t\t<p class="text-normal">${e.author}</p>\n\t\t\t\t\t\t\t\t<p>${e.comment}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="review-margin-bottom row comment-item">\n\t\t\t\t\t\t<div class="col-xs-9 col-sm-9">\n\t\t\t\t\t\t\t<div class="review-inner review-gray review-arrow review-arrow-right">\n\t\t\t\t\t\t\t\t<p class="text-normal">${n.author}</p>\n\t\t\t\t\t\t\t\t<p>${n.comment}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="col-xs-3 col-sm-2">\n\t\t\t\t\t\t\t<div class="review-user">\n\t\t\t\t\t\t\t\t<img src="images/users/${n.image?n.image:"user_none.png"}" alt="" class="img-responsive avatar">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="row comment-item">\n\t\t\t\t\t\t<div class="col-xs-3 col-sm-2">\n\t\t\t\t\t\t\t<div class="review-user">\n\t\t\t\t\t\t\t\t<img src="images/users/${o.image?o.image:"user_none.png"}" alt="" class="img-responsive avatar">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="col-xs-9 col-sm-9">\n\t\t\t\t\t\t\t<div class="review-inner review-orange review-arrow review-arrow-left">\n\t\t\t\t\t\t\t\t<p class="text-normal">${o.author}</p>\n\t\t\t\t\t\t\t\t<p>${o.comment}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n        `)};fetch("./comments.json").then((t=>t.json())).then((t=>{o(t.comments[n],t.comments[n+1],t.comments[n+2]),n=1,setInterval((()=>{return(e=t.comments)[n+1]?e[n+2]?(o(e[n],e[n+1],e[n+2]),n++):(o(e[n],e[n+1],e[0]),n++):(o(e[n],e[0],e[1]),n++),void(n>=e.length&&(n=0));var e}),2e4)}))})()})();